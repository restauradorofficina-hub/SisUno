üß© SisUno v0.8 ‚Äî Integra√ß√£o de Custos e Deslocamento
üîπ 1. Objetivo Geral
Unificar os c√°lculos de custos operacionais, m√£o de obra e deslocamento no m√≥dulo de or√ßamentos, eliminando a necessidade de uso manual das planilhas externas.
O sistema passar√° a calcular automaticamente:


custo/hora dos colaboradores,


rateio de despesas fixas,


custos de deslocamento por quil√¥metro,


custo total do servi√ßo e margem de lucro.



üîπ 2. Fontes de Dados
OrigemTipoDescri√ß√£oDestino no SistemaPlanilha de Custos GeraisXLSXCustos de pessoal, encargos e despesas fixasBase de c√°lculo da tabela custos_basePlanilha de DeslocamentoXLSXCusto do ve√≠culo por km rodadoTabela custos_veiculoBanco SQLite (sisuno_test.db)DBClientes, prontu√°rios e or√ßamentosIntegra√ß√£o e gera√ß√£o final dos valores de or√ßamento

üîπ 3. Estrutura T√©cnica Proposta
üóÇÔ∏è Novas Tabelas
CREATE TABLE custos_base (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    descricao TEXT,
    tipo TEXT,              -- MDO, FIXO, COMERCIAL, etc.
    valor REAL,
    data_atualizacao DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE custos_veiculo (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    descricao TEXT,
    custo_km REAL,
    data_atualizacao DATETIME DEFAULT CURRENT_TIMESTAMP
);

üßÆ Altera√ß√µes na Tabela orcamentos
ALTER TABLE orcamentos ADD COLUMN custo_total REAL DEFAULT 0;
ALTER TABLE orcamentos ADD COLUMN deslocamento_km REAL DEFAULT 0;
ALTER TABLE orcamentos ADD COLUMN deslocamento_total REAL DEFAULT 0;
ALTER TABLE orcamentos ADD COLUMN lucro_previsto REAL DEFAULT 0;


üîπ 4. Integra√ß√£o de C√°lculo
O m√≥dulo gerar_orcamento_pdf.py e test_orcamentos_v06.py ser√£o atualizados para incluir:


leitura dos custos da nova tabela (custos_base);


leitura autom√°tica do custo/km da tabela custos_veiculo;


c√°lculo autom√°tico de custo total + deslocamento + lucro;


exporta√ß√£o dos dados consolidados no PDF do or√ßamento.



üîπ 5. Etapas de Desenvolvimento
EtapaDescri√ß√£oStatus1Ô∏è‚É£Gera√ß√£o das tabelas custos_base e custos_veiculoüîú A executar2Ô∏è‚É£Importa√ß√£o dos dados das planilhasüîú A executar3Ô∏è‚É£Atualiza√ß√£o do m√≥dulo de or√ßamento‚è≥ Em planejamento4Ô∏è‚É£Teste e gera√ß√£o autom√°tica do PDF completo‚è≥ Em planejamento5Ô∏è‚É£Documento t√©cnico v0.8 consolidadoüîú Ap√≥s valida√ß√£o

Posso agora gerar os arquivos SQL iniciais para criar essas novas tabelas (custos_base e custos_veiculo) e preparar o ambiente da v0.8?