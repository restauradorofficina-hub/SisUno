üß© SisUno ‚Äî Documento T√©cnico v0.3
üîñ Vers√£o

v0.3 ‚Äî M√≥dulo de Prontu√°rio do Cliente
Data: 04/11/2025
Autor: Equipe SisUno
Base anterior: v0.2 (Banco de Dados Revisado com m√∫ltiplos pap√©is CLIENTE/FORNECEDOR)

üß≠ 1. Objetivo da vers√£o

Adicionar o m√≥dulo de prontu√°rio, que cria e organiza automaticamente a estrutura documental de cada cliente dentro do sistema.
Esse m√≥dulo permite vincular or√ßamentos, fotos, documentos, projetos e arquivos de modelagem (ex: SketchUp) a um cliente de forma centralizada.

üß± 2. Estrutura T√©cnica
2.1 Diret√≥rios criados automaticamente

Cada novo cliente recebe uma pasta gerada a partir do nome e data atual:

H:\SisUno\Clientes\<NOME>_<DATA>\
‚îú‚îÄ‚îÄ documentos\
‚îú‚îÄ‚îÄ fotos\
‚îú‚îÄ‚îÄ orcamentos\
‚îî‚îÄ‚îÄ sketchup\


Exemplo:

H:\SisUno\Clientes\Jo√£o_Silva_2025-11-04\

2.2 Banco de Dados
Tabela principal envolvida:

pessoas

CREATE TABLE pessoas (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    tipo TEXT CHECK(tipo IN ('FISICA', 'JURIDICA')) NOT NULL,
    nome TEXT NOT NULL,
    documento TEXT,
    telefone TEXT,
    email TEXT,
    endereco TEXT,
    cidade TEXT,
    uf TEXT,
    papeis TEXT CHECK(papeis IN ('CLIENTE', 'FORNECEDOR', 'AMBOS')) DEFAULT 'CLIENTE',
    observacoes TEXT,
    criado_em DATETIME DEFAULT CURRENT_TIMESTAMP
);

Nova Tabela:

prontuarios

CREATE TABLE prontuarios (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    cliente_id INTEGER NOT NULL,
    codigo TEXT UNIQUE NOT NULL,
    descricao TEXT,
    caminho TEXT NOT NULL,
    criado_em DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (cliente_id) REFERENCES pessoas(id)
);

‚öôÔ∏è 3. Script implementado

Arquivo:
src/backend/add_prontuario.py

Fun√ß√µes principais:

Leitura do cliente no banco (pessoas)

Cria√ß√£o autom√°tica das pastas na estrutura H:\SisUno\

Gera√ß√£o do c√≥digo de prontu√°rio (PRT-<ID>-<timestamp>)

Registro do prontu√°rio no banco SQLite

üß™ 4. Teste e Valida√ß√£o
Passos realizados:

Inserido cliente de teste:

Jo√£o Silva


Executado script:

python add_prontuario.py


Resultado:

‚úÖ Prontu√°rio criado com sucesso!
üìÅ H:\SisUno\Clientes\Jo√£o_Silva_2025-11-04


Confirma√ß√£o visual: pastas criadas conforme esperado